# Values for cataloging-statisticstest.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

cataloging-statistics:
  replicaCount: 1

  image:
    repository: uclalibrary/cataloging-statistics
    tag: latest
    pullPolicy: Always

  nameOverride: ""

  fullnameOverride: ""

  service:
    type: NodePort
    port: 80
    
  ingress:
    enabled: "true"
    annotations:
      kubernetes.io/ingress.class: "nginx"
      nginx.ingress.kubernetes.io/proxy-read-timeout: "600"
      nginx.ingress.kubernetes.io/proxy-send-timeout: "600"
      cert-manager.io/cluster-issuer: sectigo-acme-clusterissuer
      kubernetes.io/tls-acme: "true"

    hosts:
      - host: 'catstats.library.ucla.edu'
        paths:
          - "/"
    tls:
    - secretName: cataloging-statistics-tls
      hosts:
        - catstats.library.ucla.edu

  django:
    env:
      run_env: "test"
      debug: "false"
      allowed_hosts:
        - catstats.library.ucla.edu
      db_backend: "django.db.backends.postgresql_psycopg2"
      db_name: "cataloging_stats"
      db_user: "cataloging_stats"
      db_host: "p-d-postgres.library.ucla.edu"
      db_port: 5432
      log_level: "INFO"

    externalSecrets:
      enabled: "true"
      env:
        # Application database used by django
        db_password: "/systems/testsoftwaredev/cataloging-statisticstest/db_password"
        django_secret_key: "/systems/testsoftwaredev/cataloging-statisticstest/django_secret_key"
        alma_api_key: "/systems/testsoftwaredev/cataloging-statisticstest/alma_api_key"

  resources:
    limits:
      cpu: 500m
      memory: 500Mi
    requests:
      cpu: 250m
      memory: 100Mi

  nodeSelector: {}

  tolerations: []

  affinity: {}
